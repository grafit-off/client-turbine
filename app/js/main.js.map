{"version":3,"sources":["main.js"],"names":["isiPhone","navigator","userAgent","match","isiPad","isiPod","disableScroll","pagePosition","window","scrollY","document","querySelector","style","scrollBehavior","body","classList","add","dataset","position","top","enableScroll","parseInt","remove","scroll","left","removeAttribute","scrollLock_BtnListener","item","addEventListener","e","toggle","contains","DynamicAdapt","type","this","prototype","init","_this","оbjects","daClassname","nodes","querySelectorAll","i","length","node","dataArray","transfer","trim","split","оbject","element","parent","parentNode","destination","breakpoint","place","index","indexInParent","push","arraySort","mediaQueries","Array","map","call","filter","self","indexOf","media","mediaSplit","String","matchMedia","mediaBreakpoint","оbjectsFilter","addListener","mediaHandler","matches","moveTo","moveBack","children","insertAdjacentElement","undefined","array","slice","arr","sort","a","b","da","modalButtons","lockPadding","modalCloseButtons","timeout","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","console","log","modalCurrentButton","modalName","path","curentModal","getElementById","modalOpen","setTimeout","forEach","el","focus","preventDefault","modalClose","closest","activeElement","modalActive","bodyLock","target","doUnlock","bodyUnlock","lockPaddingValue","innerWidth","offsetWidth","paddingRight","which","Element","css","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","headerBurger","headerMenu","headerLink","closeBtn","burgerToggle","header","prevScrollpos","pageYOffset","navOpen","navScroll","onscroll","currentScrollPos"],"mappings":"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","file":"main.js","sourcesContent":["// Includes\n// scrollLockIOS\r\nconst isiPhone = (navigator.userAgent.match(/iPhone/i) != null);\r\nconst isiPad = (navigator.userAgent.match(/iPad/i) != null);\r\nconst isiPod = (navigator.userAgent.match(/iPod/i) != null);\r\n// Выключение скролла\r\nlet disableScroll = () => {\r\n\tlet pagePosition = window.scrollY;\r\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\r\n\tdocument.body.classList.add('ios-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n}\r\n\r\n// Включение скролла\r\nlet enableScroll = () => {\r\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\r\n\tdocument.body.style.top = 'auto';\r\n\tdocument.body.classList.remove('ios-lock');\r\n\twindow.scroll({ top: pagePosition, left: 0 });\r\n\tdocument.querySelector('html').removeAttribute('style');\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\n\r\n// Слушательна один элемент\r\nlet scrollLock_BtnListener = (item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\titem.classList.toggle('scroll')\r\n\t\tif (item.classList.contains('scroll')) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tenableScroll();\r\n\t\t}\r\n\t});\r\n};\n// HTML data-transfer=\"where(uniq class name),when(breakpoint),position(digi)\"\n// e.x. data-transfer=\".item,992,2\"\n\nfunction DynamicAdapt(type) {\n\tthis.type = type;\n}\n\nDynamicAdapt.prototype.init = function () {\n\tconst _this = this;\n\t// массив объектов\n\tthis.оbjects = [];\n\tthis.daClassname = \"_dynamic_adapt_\";\n\t// массив DOM-элементов\n\tthis.nodes = document.querySelectorAll(\"[data-transfer]\");\n\n\t// наполнение оbjects объктами\n\tfor (let i = 0; i < this.nodes.length; i++) {\n\t\tconst node = this.nodes[i];\n\t\tconst data = node.dataset.transfer.trim();\n\t\tconst dataArray = data.split(\",\");\n\t\tconst оbject = {};\n\t\tоbject.element = node;\n\t\tоbject.parent = node.parentNode;\n\t\tоbject.destination = document.querySelector(dataArray[0].trim());\n\t\tоbject.breakpoint = dataArray[1] ? dataArray[1].trim() : \"767\";\n\t\tоbject.place = dataArray[2] ? dataArray[2].trim() : \"last\";\n\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\n\t\tthis.оbjects.push(оbject);\n\t}\n\n\tthis.arraySort(this.оbjects);\n\n\t// массив уникальных медиа-запросов\n\tthis.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {\n\t\treturn '(' + this.type + \"-width: \" + item.breakpoint + \"px),\" + item.breakpoint;\n\t}, this);\n\tthis.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {\n\t\treturn Array.prototype.indexOf.call(self, item) === index;\n\t});\n\n\t// навешивание слушателя на медиа-запрос\n\t// и вызов обработчика при первом запуске\n\tfor (let i = 0; i < this.mediaQueries.length; i++) {\n\t\tconst media = this.mediaQueries[i];\n\t\tconst mediaSplit = String.prototype.split.call(media, ',');\n\t\tconst matchMedia = window.matchMedia(mediaSplit[0]);\n\t\tconst mediaBreakpoint = mediaSplit[1];\n\n\t\t// массив объектов с подходящим брейкпоинтом\n\t\tconst оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {\n\t\t\treturn item.breakpoint === mediaBreakpoint;\n\t\t});\n\t\tmatchMedia.addListener(function () {\n\t\t\t_this.mediaHandler(matchMedia, оbjectsFilter);\n\t\t});\n\t\tthis.mediaHandler(matchMedia, оbjectsFilter);\n\t}\n};\n\nDynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {\n\tif (matchMedia.matches) {\n\t\tfor (let i = 0; i < оbjects.length; i++) {\n\t\t\tconst оbject = оbjects[i];\n\t\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\n\t\t\tthis.moveTo(оbject.place, оbject.element, оbject.destination);\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < оbjects.length; i++) {\n\t\t\tconst оbject = оbjects[i];\n\t\t\tif (оbject.element.classList.contains(this.daClassname)) {\n\t\t\t\tthis.moveBack(оbject.parent, оbject.element, оbject.index);\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Функция перемещения\nDynamicAdapt.prototype.moveTo = function (place, element, destination) {\n\telement.classList.add(this.daClassname);\n\tif (place === 'last' || place >= destination.children.length) {\n\t\tdestination.insertAdjacentElement('beforeend', element);\n\t\treturn;\n\t}\n\tif (place === 'first') {\n\t\tdestination.insertAdjacentElement('afterbegin', element);\n\t\treturn;\n\t}\n\tdestination.children[place].insertAdjacentElement('beforebegin', element);\n}\n\n// Функция возврата\nDynamicAdapt.prototype.moveBack = function (parent, element, index) {\n\telement.classList.remove(this.daClassname);\n\tif (parent.children[index] !== undefined) {\n\t\tparent.children[index].insertAdjacentElement('beforebegin', element);\n\t} else {\n\t\tparent.insertAdjacentElement('beforeend', element);\n\t}\n}\n\n// Функция получения индекса внутри родителя\nDynamicAdapt.prototype.indexInParent = function (parent, element) {\n\tconst array = Array.prototype.slice.call(parent.children);\n\treturn Array.prototype.indexOf.call(array, element);\n};\n\n// Функция сортировки массива по breakpoint и place \n// по возрастанию для this.type = min\n// по убыванию для this.type = max\nDynamicAdapt.prototype.arraySort = function (arr) {\n\tif (this.type === \"min\") {\n\t\tArray.prototype.sort.call(arr, function (a, b) {\n\t\t\tif (a.breakpoint === b.breakpoint) {\n\t\t\t\tif (a.place === b.place) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\treturn a.place - b.place;\n\t\t\t}\n\n\t\t\treturn a.breakpoint - b.breakpoint;\n\t\t});\n\t} else {\n\t\tArray.prototype.sort.call(arr, function (a, b) {\n\t\t\tif (a.breakpoint === b.breakpoint) {\n\t\t\t\tif (a.place === b.place) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\treturn b.place - a.place;\n\t\t\t}\n\n\t\t\treturn b.breakpoint - a.breakpoint;\n\t\t});\n\t\treturn;\n\t}\n};\n\nconst da = new DynamicAdapt(\"max\");\nda.init();;\nconst body = document.querySelector('body')\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (lockPadding.length == 0) {\r\n\tconsole.log('@MODALS: \"Не забудьте добавить класс \"lock-padding\" фиксированным элементам!\"')\r\n}\r\nif (typeof (disableScroll) == 'function' && typeof (enableScroll)) {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)}\"! Для IOS будет выполнятся скрипт scrollLockIOS`);\r\n} else {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tconsole.log(`Открыто модальное окно: ${modalName}`);\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Такого модального окна нету! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (typeof (disableScroll) === \"function\") {\r\n\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tdisableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.add('lock');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (typeof (enableScroll) === \"function\") {\r\n\t\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\t\tenableScroll();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\n// -- //\n\n\n// Burger Menu\nconst headerBurger = document.querySelector('.burger');\nconst headerMenu = document.querySelector('.nav');\nconst headerLink = document.querySelectorAll('.menu__link');\nconst closeBtn = document.querySelector('.nav__menu-close')\n\nfunction burgerToggle() {\n\theaderBurger.classList.toggle('active');\n\theaderMenu.classList.toggle('nav--visible');\n\tif (!isiPhone && !isiPad && !isiPod) { body.classList.toggle('lock'); }\n}\nif (isiPhone || isiPad || isiPod) {\n\tscrollLock_BtnListener(headerBurger);\n}\nheaderBurger.addEventListener('click', () => {\n\tburgerToggle()\n})\n\ncloseBtn.addEventListener('click', () => {\n\tburgerToggle();\n\tif (isiPhone || isiPad || isiPod) {\n\t\tenableScroll();\n\t\theaderBurger.classList.toggle('scroll')\n\t}\n})\nheaderLink.forEach((el) => {\n\tel.addEventListener('click', () => {\n\t\tif (isiPhone || isiPad || isiPod) {\n\t\t\tenableScroll();\n\t\t\theaderBurger.classList.toggle('scroll');\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tburgerToggle();\n\t\t}, 200)\n\t})\n})\n\n// -- //\n\n// Active header on scroll\nconst header = document.querySelector(\".header\");\nlet prevScrollpos = window.pageYOffset;\nconsole.log(prevScrollpos);\n\nfunction navOpen() {\n\tif (prevScrollpos != 0) {\n\t\theader.classList.add('header--onscroll');\n\t} else {\n\t\theader.classList.remove('header--onscroll');\n\t}\n}\nfunction navScroll() {\n\twindow.onscroll = function () {\n\t\tlet currentScrollPos = window.pageYOffset;\n\t\tif (prevScrollpos < currentScrollPos) {\n\t\t\theader.classList.add('header--onscroll');\n\t\t} else if (prevScrollpos = currentScrollPos) {\n\t\t\tsetTimeout(() => {\n\t\t\t\theader.classList.add('header--onscroll');\n\t\t\t}, 0);\n\t\t} else {\n\t\t\theader.classList.remove('header--onscroll');\n\t\t}\n\t\tprevScrollpos = currentScrollPos;\n\t}\n}\nnavOpen()\nnavScroll()\n// -- //"]}